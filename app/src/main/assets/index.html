
<html>
<body>


<hi>Click the button to get your coordinates.</hi>

<!--
<button onclick="getLocation()">Try It</button>
-->

<p id="demo"></p>
<br>
<p id="demowatch"></p>
<br>
<br>

<p>   current latitude:         <span></span><br>
    -_initial latitude:         <span></span><br>
      =______________:          <span></span></p>
<p>   current longitude:        <span></span><br>
    -_initial longitude:        <span></span><br>
      =_______________:         <span></span></p>
<p>   current altitude:         <span></span><br>
    -_initial altitude:         <span></span><br>
      =______________:          <span></span></p>
<p>   current accuracy:         <span></span><br>
    -_initial accuracy:         <span></span><br>
      =______________:          <span></span></p>
<p>   current altitudeAccuracy: <span></span><br>
    -_initial altitudeAccuracy: <span></span><br>
      =______________________:  <span></span></p>
<p>   current heading:          <span></span><br>
    -_initial heading:          <span></span><br>
      =_____________:           <span></span></p>
<p>   current speed:            <span></span><br>
    -_initial speed:            <span></span><br>
      =___________:             <span></span></p>
<p>   current local time:       <span></span><br>
    -_initial local time:       <span></span><br>
      =________________:        <span></span></p>









<script>

var x = document.getElementById("demo");
var w = document.getElementById("demowatch");
var watchID;

//x.innerHTML = "Geolocation";


function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);

    //navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
    //navigator.geolocation.getCurrentPosition(
    //successCallback, errorCallback, {enableHighAccuracy:false; timeout:6000; maximumAge:0;}
    //);.toLocaleTimeString()

    watchID = navigator.geolocation.watchPosition(
        function(position){
               spans = document.querySelectorAll('p span');
               spans[0].textContent = position.coords.latitude;
               spans[3].textContent = position.coords.longitude;
               spans[6].textContent = position.coords.altitude;
               spans[9].textContent = position.coords.accuracy;
               spans[12].textContent = position.coords.altitudeAccuracy;
               spans[15].textContent = position.coords.heading;
               spans[18].textContent = position.coords.speed;
               //spans[21].textContent = position.timestamp.toLocaleTimeString();
               spans[21].textContent = new Date(position.timestamp).toLocaleString();


               spans[2].textContent = (spans[0].textContent - spans[1].textContent).toFixed(7);

            const now = new Date();
            let gl_txt = "latitude: "         + position.coords.latitude + "<br>";
              gl_txt +=  "longitude: "        + position.coords.longitude + "<br>";
              gl_txt +=  "altitude: "         + position.coords.altitude + "<br>";
              gl_txt +=  "accuracy: "         + position.coords.accuracy + "<br>";
              gl_txt +=  "altitudeAccuracy: " + position.coords.altitudeAccuracy + "<br>";
              gl_txt +=  "heading: "          + position.coords.heading + "<br>";
              gl_txt +=  "speed: "            + position.coords.speed + "<br>";
              gl_txt +=  "local time: "       + now.toLocaleTimeString() + "<br>";
              w.innerHTML = gl_txt;
        },null);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

getLocation();


function showPosition(position) {
    spans = document.querySelectorAll('p span');
    spans[1].textContent = position.coords.latitude;
    spans[4].textContent = position.coords.longitude;

  x.innerHTML = "Latitude: " + position.coords.latitude +
  "<br>Longitude: " + position.coords.longitude +
  "<br>Altitutude: " + position.coords.altitude +
  "<br>Accuracy: " + position.coords.accuracy;

  //x.innerHTML = "";
  //for (var key in position.coords) {
  //x.innerHTML += key;
  //}
  }

 function successCallback(position) {
  const date = new Date();
  var gl_text = "latitude: "         + position.coords.latitude + "<br>";
    gl_text +=  "longitude: "        + position.coords.longitude + "<br>";
    gl_text +=  "altitude: "         + position.coords.altitude + "<br>";
    gl_text +=  "accuracy: "         + position.coords.accuracy + "<br>";
    gl_text +=  "altitudeAccuracy: " + position.coords.altitudeAccuracy + "<br>";
    gl_text +=  "heading: "          + position.coords.heading + "<br>";
    gl_text +=  "speed: "            + position.coords.speed + "<br>";
    gl_text +=  "local time: "       + date.toLocaleTimeString() + "<br>";
    x.innerHTML = gl_text;
}

function errorCallback(error) {
  var err_msg = "";
  switch(error.code)
  {
    case 1:
      err_msg = "PERMISSION_DENIEDÂ“";
      break;
    case 2:
      err_msg = "POSITION_UNAVAILABLE";
      break;
    case 3:
      err_msg = "TIMEOUT";
      break;
  }
  x.innerHTML = err_msg;
}

</script>

</body>
</html>


<!--
function init(){
if(navigator.geolocation){
let giveUp = 1000 * 30;  //30 seconds
let tooOld = 1000 * 60 * 60;  //one hour
options ={
enableHighAccuracy: true,
timeout: giveUp,
maximumAge: tooOld
}

navigator.geolocation.getCurrentPosition(gotPos, posFail, options);
}else{
//using an old browser that doesn't support geolocation
}
}

function gotPos(position){
spans = document.querySelectorAll('p span');
spans[0].textContent = position.coords.latitude;
spans[1].textContent = position.coords.longitude;
spans[2].textContent = position.coords.accuracy;

spans[6].textContent = position.timestamp;
}

function posFail(err){
//err is a number
let errors = {
1: 'No permission',
2: 'Unable to determine',
3: 'Took too long'
}
document.querySelector('h1').textContent = errors[err];
}